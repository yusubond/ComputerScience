## #2线程

### 线程

线程是CPU使用的基本单元，由线程ID，程序计数器，寄存器和栈组成。同属一个进程的所有线程共享代码数据，系统资源。多线程具有如下优点：响应度高，资源共享，更经济(较进程)，充分利用多处理器系统的结构。

### 多线程模型

操作系统中有两种方法提供线程支持：用户层的 **用户线程** 和 内核层的 **内核线程**。用户线程受内核内核支持，而无需内核管理；内核线程由系统直接支持和管理。

1）多对一模型：多个用户线程映射到一个内核线程

特点：线程管理由线程库在用户空间进行，效率高；一个线程阻塞系统调用，整个进程阻塞；任意时刻，只有一个线程能访问内核(也就是，多线程不能并行运行在多处理器上)

2）一对一模型：每个用户线程映射到一个内核线程

特点：一个线程阻塞，其他线程不受影响，具有并发功能；允许多线程运行在多处理器上。

3）多对多模型：即多路复用，许多用户线程映射到同等数量或较少数量的内核线程

特点：结合多对一模型和一对一模型的优点，其对应的一个变形是 **二级模型** (先允许一个用户线程绑定到一个内核线程上，然后，其他用户线程多路复用)

<b>线程库</b>

线程库为程序员提供创建和管理线程的API函数，主要有两种方法来实现线程库：<b>系统调用</b>和<b>非系统调用</b>

1)在用户空间提供没有内核支持的库，称为 **非系统调用**；  
2）由系统支持的内核级库，称为 **系统调用**
