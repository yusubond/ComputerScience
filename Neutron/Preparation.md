## Preparation

目录

  * [OpenStack网络](#OpenStack)
  * [网络模型](#网络模型)

### OpenStack网络

OpenStack网络是一个可插拔，可扩展和API驱动的系统，用于在基于OpenStack的云中管理网络和IP地址。像其他OpenStack的核心组件一样，管理员和用户均可以使用OpenStack网络来增加现有数据中心资源的价值并最大化利用率。

Neutron是OpenStack网络的代号，它是一种独立的服务，可以独立于其他OpenStack服务，例如Nova（计算服务），Glance（图像存储服务），Keystone（身份服务），Cinder（块存储服务）和Horizon（控制台）。 OpenStack网络服务可以在多个主机之间分配，以提供弹性和冗余，或者可以将其设置为在单个节点上运行。

OpenStack网络服务包括数据中心的许多技术，包括交换(Switching)，路由(Routing)，负载平衡(Load Balancing)，防火墙(Firewalling)和虚拟专用网络(Virtual Private Network)。

**交换**

**虚拟交换机** 定义为将虚拟机连接到数据链路层(Layer 2)的虚拟网络的软件应用程序。 Neutron支持多个虚拟交换平台，包括内核模块支持的 **Linux Bridge** 和 **Open vSwitch**。Open vSwitch，也称为OVS，是支持标准管理接口和协议的开源虚拟交换机，包括NetFlow，SPAN，RSPAN，LACP和802.1q VLAN标记。

**路由**

OpenStack网络服务利用ip转发、iptables工具以及网络命名空间等技术提供 **路由** 和 **NAT** 功能。在网络命名空间内，我们可以创建的套接字，绑定端口和接口。每个网络命名空间都有自己的路由表，接口和iptables进程，提供转换和网络地址转换。**通过利用网络命名空间来分离网络，不必担心由租户创建的网络之间的重叠子网**。通过配置Neutron内的路由器可使实例与外部网络或其他网络进行交互和通信，同时在云端路由器命名空间也被高级网络服务防火墙即服务和虚拟专用网络即服务所利用。

**负载均衡**

负载均衡功能最先在OpenStack的Grizzly版本中发布。负载平衡即服务（也称为LBaaS）为用户提供跨多个实例或服务器分发客户端请求的能力。 用户可以创建监视器，设置连接限制，并应用持久性程序来遍历虚拟负载均衡器。

**防火墙**

在OpenStack的Kilo版本中，有两种方法可以为实例提供安全性：**安全组** 和 **防火墙**。

**虚拟专用网络**

虚拟专用网络也称为VPN，可以通过互联网等公共网络扩展专用网络。 VPN可以使计算机在公共网络上发送和接收数据，就像直接连接到专用网络一样。

### 网络模型

为了方便对OpenStack网络服务进行学习和了解，现将OpenStack服务简化成一个具有三个节点的架构（如图所示），其中包含一个控制节点(同时也承担网络节点的功能)和两个计算节点。

![网络模型](http://on64c9tla.bkt.clouddn.com/Neutron/neutron_preparation.png)

根据网络流的不同，Openstack网络定义了四种不同的网络流类型：

+ Management网络

    **管理网络** 也称为内部网络。用于诸如消息传递服务和数据库服务之类的主机之间的内部通信。 **所有主机将通过该网络相互通信**。 在许多情况下，可以使用相同的界面来促进主机之间的扫描图像传输或一些其他带宽密集型的传输。 管理网络可以被配置为专用接口上的隔离网络或与另一个网络组合。

+ API网络

    **API网络** 用于将OpenStack API暴露给云中的用户和云内的服务。 OpenStack中服务（如Keystone，Neutron，Glance和Horizon）的端点地址均是从API网络接口获得。通常的做法是使用单一接口和IP地址进行API端点设定，并通过SSH对主机本身进行管理访问。

+ External网络

    **外部网络** 为Neutron路由器提供网络访问。 一旦路由器被配置并连接到外部网络，网络就变成了用于实例和其他网络资源的IP地址的源IP。 外部网络中的IP地址可以由公司网络或因特网上的客户端路由和访问。

+ Guest网络

    **访客网络** 是专用于实例流量的网络。 访客网络的选项包括限于某个特定节点的本地网络，或标记了VLAN的网络，或者通过GRE或VXLAN封装形成的虚拟覆盖网络。用于外部和访客网络的物理接口可以是专用接口或与其他类型的传输共享的接口。
